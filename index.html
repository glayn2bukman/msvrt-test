<!doctype html>
<html>
    <head>
        <meta charset="utf-8">        
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">

        <title>UNBS-SMVT</title>
    
        <link rel="stylesheet" href="static/bootstrap-3.3.7/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="static/loading.css">
        <link rel="stylesheet" href="static/index.css">

        <!-- jQuery library -->
        <script src="static/jquery-3.3.1.min.js"></script>

        <!-- Latest compiled JavaScript -->
        <script src="static/bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>    

        <script src="static/globals.js"></script>
        <script src="static/index.js"></script>
        <script src="static/districts.js"></script>
        <script src="static/CircleType.min.js"></script>

        <!-- sweet alert -->
        <script src="static/sweetalert/sweetalert.min.js"></script>
        <link rel="stylesheet" href="static/sweetalert/sweetalert.css">

        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
 
        <link id="theme" rel="stylesheet" href="">
    </head>

    <body oncontextmenu="return false;">

        <img id='watermark' src='data/logo.png' class='center'>

        <div class="modal fade" id="reports_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="modal-dialog" style="width:96%;" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Edit Report</h4>
              </div>
              <div class="modal-body">
                    <div id="report_meter_details">
                        <div class='report-title report-col-title report-date' style='margin-bottom:10px;'>Meter Details</div>

                        <div class="row">
                            <span class="key">District/Area</span>
                            <input id='e_loc' name='area' type="text" class="form-control value mandatory" list="e_districtsl">
                            <datalist id="e_districtsl"><select id="e_districts"></select></datalist>
                        </div>
                        <div class="row">
                            <span class="key">Distributor</span>
                            <select id='e_dist' name='distributor' class="form-control value">
                                <option value='UMEME'>UMEME</option>
                            </select>
                        </div>
                        <div class="row">
                            <span class="key">Manufacturer</span>
                            <select id='e_manufacturer' name='manufacturer' class="form-control value">
                                <option value='Conlog'>Conlog</option>
                            </select>
                        </div>
                        <div class="row">
                            <span class="key">Modal</span>
                            <select id='e_modal' name='modal' class="form-control value">
                                <option value='BEC 44'>BEC 44</option>
                            </select>
                        </div>
                        <div class="row">
                            <span class="key">Meter No.(S/N)</span>
                            <input id='e_sn' name='serial_number' type="text" class="form-control value mandatory">
                        </div>
                        <div class="row" >
                            <span style='color:#13a;float:right;' onclick='readbarcode()'>scan barcode</span>
                        </div>
                        <br>
                        <div class="row">
                            <span class="key">Accuracy Class</span>
                            <select id='e_ac' name='accuracy_class' class="form-control value">
                                <option value='2.0'>2.0</option>
                            </select>
                        </div>
                        <div class="row">
                            <label class="radio-inline" style='float:right;'>
                                <input id='e_prepaid' type="radio" name="payment_method" value='Prepaid' checked onchange="toggle_prepaid(this)">Prepaid
                            </label>
                            <label class="radio-inline" style='float:right;margin-right:15px;'>
                                <input id='e_postpaid' type="radio" name="payment_method" value='PostPaid' onchange="toggle_postpaid(this)">PostPaid
                            </label>
                        </div>
                        <br>
                        <div class="row prepaid-only">
                            <span class="key">F.I Token No.</span>
                            <input id='e_fitn' name='token_number' type="text" class="form-control value mandatory">
                        </div>
                        <div class="row">
                            <span class="key">Verification ID</span>
                            <input name='verification_id' type="text" class="form-control value mandatory">
                        </div>
                        <div class="row">
                            <span class="key">P.A Number</span>
                            <input id='e_pan' name='pattern_approval_number' type="text" class="form-control value mandatory">
                        </div>
                        <br>
                        <div class="row">
                            <span class="key">Rated Voltage</span>
                            <select id='e_rv' name='rated_voltage' class="form-control value">
                                <option value='240'>240</option>
                            </select>
                        </div>
                        <div class="row">
                            <span class="key">Rated Current</span>
                            <select id='e_rc' name='rated_current' class="form-control value">
                                <option value='5'>5</option>
                            </select>
                        </div>
                        <div class="row">
                            <span class="key">Max. Current</span>
                            <select id='e_maxc' name='max_current' class="form-control value">
                                <option value='100'>100</option>
                            </select>
                        </div>
                        <div class="row">
                            <label class="radio-inline" style='float:right;'>
                                <input id='e_single_phase' type="radio" name="phase_type" value='Single Phase' checked onchange='toggle_single_phase()'>Single Phase
                            </label>
                            <label class="radio-inline" style='float:right;margin-right:15px;'>
                                <input id='e_three_phase' type="radio" name="phase_type" value='Three Phase' onchange='toggle_three_phase(this)'>Three Phase
                            </label>
                        </div>

                        <br class='three-phase-only'>
                        <div class="row three-phase-only">
                            <span class="key">Meter Time</span>
                            <input id='e_mt' name='meter_time' type="time" class="form-control value mandatory">
                        </div>
                        <div class="row three-phase-only">
                            <span class="key">Connection Mode</span>
                            <input id='e_cm' name='connection_mode' type="text" class="form-control value mandatory">
                        </div>
                        <div class="row three-phase-only">
                            <span class="key">Ct Ration</span>
                            <input id='e_ctr' name='ct_ration' type="text" class="form-control value mandatory">
                        </div>
                        <div class="row three-phase-only">
                            <span class="key">Vt Ration</span>
                            <input id='e_vtr' name='vt_ration' type="text" class="form-control value mandatory">
                        </div>

                        <br>
                        <div class="row prepaid-only">
                            <span class="key">Credit b/f testing</span>
                            <input id='e_cbt' name='credit_before_testing' type="text" class="form-control value mandatory">
                        </div>
                        <div class="row prepaid-only">
                            <span class="key">Credit after</span>
                            <input id='e_cat' name='credit_after_testing' type="text" class="form-control value mandatory">
                        </div>
                        <br>
                        <div class="row">
                            <span class="key">Energry b/f test</span>
                            <input id='e_ebt' name='energy_before_testing' type="text" class="form-control value mandatory">
                        </div>
                        <div class="row">
                            <span class="key">Energry after</span>
                            <input id='e_eat' name='energy_after_testing' type="text" class="form-control value mandatory">
                        </div>

                    </div>

                    <div class='report-title report-col-title report-date' style='margin-bottom:10px;margin-top:10px;'>Inspection Details</div>
                        <div id="report_inspection">
                            <div class="checkbox">
                                  <label><input id='e_ts' name='tamper_switch_ok' type="checkbox" value="">Tamper Switch is Ok</label>
                            </div>
                            <div class="checkbox">
                                  <label><input id='e_mbo' name='meter_body_ok' type="checkbox" value="">Meter body is not damaged</label>
                            </div>
                            <div class="checkbox">
                                  <label><input id='e_to' name='terminals_ok' type="checkbox" value="">Terminals are not damaged</label>
                            </div>
                            <div class="checkbox">
                                  <label><input id='e_sci'name='screw_caps_ok' type="checkbox" value="">Screw caps and/or body seal is not damaged</label>
                            </div>
                            <div class="checkbox">
                                  <label><input id='e_mmv' name='meter_markings_visible' type="checkbox" value="">Meter marking are visible</label>
                            </div>

                            <br>
                            <div class="checkbox">
                                  <label><input id='e_lp' name='LED_pulsating' type="checkbox" value="">LED pulsing output working on applying rated current & voltage</label>
                            </div>
                            <div class="checkbox">
                                  <label><input id='e_mrp' name='meter_receives_power' type="checkbox" value="">Meter able to show thats its receiving power</label>
                            </div>
                            <div class="checkbox">
                                  <label><input id='e_mc2c' name='meter_connects_to_CIU' type="checkbox" value="">Meter operating and can connect to CIU well</label>
                            </div>
                            <div class="checkbox">
                                  <label><input id='e_crb' name='can_read_credit' type="checkbox" value="">Able to read credit, balance and appropriate registers</label>
                            </div>
                            <br>
                            <div class="checkbox">
                                  <label><input id='e_pot' name='passed_overall_accuracy_test' type="checkbox" value="">Passed overall accuracy test</label>
                            </div>
                            <label>remark</label>
                            <textarea id='e_remark' name='remarks' class='form-control mandatory' rows=5 placeholder='remarks'></textarea>

                        </div>
                        
                    <div class='report-title report-col-title report-date' style='margin-bottom:10px;margin-top:10px;'>Recommendations</div>
                        <div class="row">
                            <div class="radio">
                                <label><input id='e_ft' type="radio" name="recommendation" value='Further Testing' checked>Further Testing</label>
                            </div>
                            <div class="radio">
                                <label><input id='e_mr' type="radio" name="recommendation" value='Meter Replacement'>Meter Replacement</label>
                            </div>
                        </div>

              <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal" >Back</button>
                <button type="button" class="btn btn-success" onclick="send_report_update()">Update Report</button>
              </div>
            </div>
          </div>
        </div></div>
        
        <div id='login_div' style="display:none2">
            <h1 id='title'>UNBS SMVT</h1>
            <div id='login_form'>
                <div class="input-group" style='margin-bottom:10px;'>
                    <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                    <input id="uname" type="text" class="form-control li" name="uname" placeholder="Username">
                </div>
                <div class="input-group" style='margin-bottom:20px;'>
                    <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                    <input id="pswd" type="password" class="form-control li" name="pswd" placeholder="Password">
                </div>
                <div>
                    <button class='btn btn-info' style='width:40%;float:right;background:white;color:black;' onclick='login()'>Login</button>
                </div>
            </div>
            
            <span id='jermlogo'>Powered by JERM Technology</span>
        </div>

        <input name='date' id='date' type="date" style='display:none;'>


        <div id='meter_details' class='container' style='display:none;'><form>
            <h3>Meter Details</h3>
            <script>document.getElementById("date").valueAsDate = new Date();</script>
            <div class="row">
                <span class="key">District/Area</span>
                <input id='loc' name='area' type="text" class="form-control value mandatory" list="districtsl">
                <datalist id="districtsl"><select id="districts"></select></datalist>
            </div>
            <div class="row">
                <span class="key">Distributor</span>
                <select id='dist' name='distributor' class="form-control value">
                    <option value='UMEME'>UMEME</option>
                </select>
            </div>
            <div class="row">
                <span class="key">Manufacturer</span>
                <select id='manufacturer' name='manufacturer' class="form-control value">
                    <option value='Conlog'>Conlog</option>
                </select>
            </div>
            <div class="row">
                <span class="key">Modal</span>
                <select id='modal' name='modal' class="form-control value">
                    <option value='BEC 44'>BEC 44</option>
                </select>
            </div>
            <div class="row">
                <span class="key">Meter No.(S/N)</span>
                <input id='sn' name='serial_number' type="text" class="form-control value mandatory">
            </div>
            <div class="row" >
                <span style='color:#13a;float:right;' onclick='readbarcode()'>scan barcode</span>
            </div>
            <br>
            <div class="row">
                <span class="key">Accuracy Class</span>
                <select id='ac' name='accuracy_class' class="form-control value">
                    <option value='2.0'>2.0</option>
                </select>
            </div>
            <div class="row">
                <label class="radio-inline" style='float:right;'>
                    <input id='prepaid' type="radio" name="payment_method" value='Prepaid' onchange="toggle_prepaid(this)" checked>Prepaid
                </label>
                <label class="radio-inline" style='float:right;margin-right:15px;'>
                    <input type="radio" name="payment_method" value='PostPaid' onchange="toggle_postpaid(this)">PostPaid
                </label>
            </div>
            <br>
            <div class="row prepaid-only">
                <span class="key">F.I Token No.</span>
                <input id='fitn' name='token_number' type="text" class="form-control value mandatory">
            </div>
            <div class="row">
                <span class="key">Verification ID</span>
                <input name='verification_id' type="text" class="form-control value mandatory">
            </div>
            <div class="row">
                <span class="key">P.A Number</span>
                <input id='pan' name='pattern_approval_number' type="text" class="form-control value mandatory">
            </div>
            <br>
            <div class="row">
                <span class="key">Rated Voltage</span>
                <select id='rv' name='rated_voltage' class="form-control value">
                    <option value='240'>240</option>
                </select>
            </div>
            <div class="row">
                <span class="key">Rated Current</span>
                <select id='rc' name='rated_current' class="form-control value">
                    <option value='5'>5</option>
                </select>
            </div>
            <div class="row">
                <span class="key">Max. Current</span>
                <select id='maxc' name='max_current' class="form-control value">
                    <option value='100'>100</option>
                </select>
            </div>
            <div class="row">
                <label class="radio-inline" style='float:right;'>
                    <input id='single_phase' type="radio" name="phase_type" value='Single Phase' onchange='toggle_single_phase()' checked>Single Phase
                </label>
                <label class="radio-inline" style='float:right;margin-right:15px;'>
                    <input type="radio" name="phase_type" value='Three Phase' onchange='toggle_three_phase(this)'>Three Phase
                </label>
            </div>

            <br class='three-phase-only'>
            <div class="row three-phase-only">
                <span class="key">Meter Time</span>
                <input id='mt' name='meter_time' type="time" class="form-control value mandatory">
            </div>
            <div class="row three-phase-only">
                <span class="key">Connection Mode</span>
                <input id='cm' name='connection_mode' type="text" class="form-control value mandatory">
            </div>
            <div class="row three-phase-only">
                <span class="key">Ct Ration</span>
                <input id='ctr' name='ct_ration' type="text" class="form-control value mandatory">
            </div>
            <div class="row three-phase-only">
                <span class="key">Vt Ration</span>
                <input id='vtr' name='vt_ration' type="text" class="form-control value mandatory">
            </div>

            <br>
            <div class="row prepaid-only">
                <span class="key">Credit b/f testing</span>
                <input id='cbt' name='credit_before_testing' type="text" class="form-control value mandatory">
            </div>
            <div class="row prepaid-only">
                <span class="key">Credit after</span>
                <input id='cat' name='credit_after_testing' type="text" class="form-control value mandatory">
            </div>
            <br>
            <div class="row">
                <span class="key">Energry b/f test</span>
                <input id='ebt' name='energy_before_testing' type="text" class="form-control value mandatory">
            </div>
            <div class="row">
                <span class="key">Energry after</span>
                <input id='eat' name='energy_after_testing' type="text" class="form-control value mandatory">
            </div>
            <br>
            <div>
                <span class='back' onclick="logout()" style='color:#ff335b;'>
                    <span><i class="glyphicon glyphicon-chevron-left"></i></span>Logout
                </span>
                <span class='next' onclick="next('meter_details')">
                    Next<span><i class="glyphicon glyphicon-chevron-right"></i></span>
                </span>
            </div>

            <div style='color:#ff0;'><br>.
            <br>.
                <span style='float:left;width:30%;'>.</span>
                <span style='color:#43a;float:left;width:40%;text-align:center;' onclick='fetch_reports(this)'>Edit My Reports</span>
                <span style='float:left;width:30%;'>.</span>
            </div>
        </form></div>

        <div id='inspection' class='container' style='display:none;'><form>
            <h3>External Visual Inspection</h3>
            <div class="checkbox">
                  <label><input id='ts' name='tamper_switch_ok' type="checkbox" value="">Tamper Switch is Ok</label>
            </div>
            <div class="checkbox">
                  <label><input id='mbo' name='meter_body_ok' type="checkbox" value="">Meter body is not damaged</label>
            </div>
            <div class="checkbox">
                  <label><input id='to' name='terminals_ok' type="checkbox" value="">Terminals are not damaged</label>
            </div>
            <div class="checkbox">
                  <label><input id='sci'name='screw_caps_ok' type="checkbox" value="">Screw caps and/or body seal is not damaged</label>
            </div>
            <div class="checkbox">
                  <label><input id='mmv' name='meter_markings_visible' type="checkbox" value="">Meter marking are visible</label>
            </div>

            <h3>Functional Inspection</h3>
            <div class="checkbox">
                  <label><input id='lp' name='LED_pulsating' type="checkbox" value="">LED pulsing output working on applying rated current & voltage</label>
            </div>
            <div class="checkbox">
                  <label><input id='mrp' name='meter_receives_power' type="checkbox" value="">Meter able to show thats its receiving power</label>
            </div>
            <div class="checkbox">
                  <label><input id='mc2c' name='meter_connects_to_CIU' type="checkbox" value="">Meter operating and can connect to CIU well</label>
            </div>
            <div class="checkbox">
                  <label><input id='crb' name='can_read_credit' type="checkbox" value="">Able to read credit, balance and appropriate registers</label>
            </div>
            <br>
            <div class="checkbox">
                  <label><input id='pot' name='passed_overall_accuracy_test' type="checkbox" value="">Passed overall accuracy test</label>
            </div>
            <label>remark</label>
            <textarea id='remark' name='remarks' class='form-control mandatory' rows=5 placeholder='remarks'></textarea>

            <h3>Recommendations</h3>

            <div class="row">
                <div class="radio">
                    <label><input id='ft' type="radio" name="recommendation" value='Further Testing' checked>Further Testing</label>
                </div>
                <div class="radio">
                    <label><input id='mr' type="radio" name="recommendation" value='Meter Replacement'>Meter Replacement</label>
                </div>
            </div>
            <br>
            <div>
                <span class='back' onclick="back('inspection')">
                    <span><i class="glyphicon glyphicon-chevron-left"></i></span>Back
                </span>

                <button class='btn btn-info' type='button' style='float:right;width:30%;' onclick='upload()'>Upload</button>

            </div>

            <div style='color:#ff0;'><br>.<br>.</div>
        </form></div>

        <div id="reports_div">
            <div id="reports_list_div"></div>
            <button class='btn btn-info' style='position:absolute;width:96%;left:2%;bottom:2px;' onclick="done_editting_reports()">Done</button>
        </div>

        <div id='loading' class="lds-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
    </body>

    <script type="text/javascript" src="static/datalist-polyfill.js"></script>

</html>